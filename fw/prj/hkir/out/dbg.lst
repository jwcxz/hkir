GAS LISTING /tmp/ccYSmu5M.s 			page 1


   1               		.file	"dbg.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/home/j/projects/acris/avr/prj/test-nrf/",100,0,2,.Ltext0
   8               		.stabs	"../../lib/dbg.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,0,
  18               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,0,0
  19               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,0,0
  20               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,0,0
  21               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,0,0
  22               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,0,0
  23               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,0,0
  24               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,0,0
  25               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"short _Fract:t(0,15)=r(0,1);1;0;",128,0,0,0
  27               		.stabs	"_Fract:t(0,16)=r(0,1);2;0;",128,0,0,0
  28               		.stabs	"long _Fract:t(0,17)=r(0,1);4;0;",128,0,0,0
  29               		.stabs	"long long _Fract:t(0,18)=r(0,1);8;0;",128,0,0,0
  30               		.stabs	"unsigned short _Fract:t(0,19)=r(0,1);1;0;",128,0,0,0
  31               		.stabs	"unsigned _Fract:t(0,20)=r(0,1);2;0;",128,0,0,0
  32               		.stabs	"unsigned long _Fract:t(0,21)=r(0,1);4;0;",128,0,0,0
  33               		.stabs	"unsigned long long _Fract:t(0,22)=r(0,1);8;0;",128,0,0,0
  34               		.stabs	"_Sat short _Fract:t(0,23)=r(0,1);1;0;",128,0,0,0
  35               		.stabs	"_Sat _Fract:t(0,24)=r(0,1);2;0;",128,0,0,0
  36               		.stabs	"_Sat long _Fract:t(0,25)=r(0,1);4;0;",128,0,0,0
  37               		.stabs	"_Sat long long _Fract:t(0,26)=r(0,1);8;0;",128,0,0,0
  38               		.stabs	"_Sat unsigned short _Fract:t(0,27)=r(0,1);1;0;",128,0,0,0
  39               		.stabs	"_Sat unsigned _Fract:t(0,28)=r(0,1);2;0;",128,0,0,0
  40               		.stabs	"_Sat unsigned long _Fract:t(0,29)=r(0,1);4;0;",128,0,0,0
  41               		.stabs	"_Sat unsigned long long _Fract:t(0,30)=r(0,1);8;0;",128,0,0,0
  42               		.stabs	"short _Accum:t(0,31)=r(0,1);2;0;",128,0,0,0
  43               		.stabs	"_Accum:t(0,32)=r(0,1);4;0;",128,0,0,0
  44               		.stabs	"long _Accum:t(0,33)=r(0,1);8;0;",128,0,0,0
  45               		.stabs	"long long _Accum:t(0,34)=r(0,1);8;0;",128,0,0,0
  46               		.stabs	"unsigned short _Accum:t(0,35)=r(0,1);2;0;",128,0,0,0
  47               		.stabs	"unsigned _Accum:t(0,36)=r(0,1);4;0;",128,0,0,0
  48               		.stabs	"unsigned long _Accum:t(0,37)=r(0,1);8;0;",128,0,0,0
  49               		.stabs	"unsigned long long _Accum:t(0,38)=r(0,1);8;0;",128,0,0,0
  50               		.stabs	"_Sat short _Accum:t(0,39)=r(0,1);2;0;",128,0,0,0
  51               		.stabs	"_Sat _Accum:t(0,40)=r(0,1);4;0;",128,0,0,0
  52               		.stabs	"_Sat long _Accum:t(0,41)=r(0,1);8;0;",128,0,0,0
  53               		.stabs	"_Sat long long _Accum:t(0,42)=r(0,1);8;0;",128,0,0,0
  54               		.stabs	"_Sat unsigned short _Accum:t(0,43)=r(0,1);2;0;",128,0,0,0
  55               		.stabs	"_Sat unsigned _Accum:t(0,44)=r(0,1);4;0;",128,0,0,0
  56               		.stabs	"_Sat unsigned long _Accum:t(0,45)=r(0,1);8;0;",128,0,0,0
  57               		.stabs	"_Sat unsigned long long _Accum:t(0,46)=r(0,1);8;0;",128,0,0,0
GAS LISTING /tmp/ccYSmu5M.s 			page 2


  58               		.stabs	"void:t(0,47)=(0,47)",128,0,0,0
  59               		.stabs	"./config.h",130,0,0,0
  60               		.stabs	"../../inc/config_top.h",130,0,0,0
  61               		.stabs	"/usr/avr/include/inttypes.h",130,0,0,0
  62               		.stabs	"/usr/lib/gcc/avr/4.8.2/include/stdint.h",130,0,0,0
  63               		.stabs	"/usr/avr/include/stdint.h",130,0,0,0
  64               		.stabs	"int8_t:t(5,1)=(0,10)",128,0,121,0
  65               		.stabs	"uint8_t:t(5,2)=(0,11)",128,0,122,0
  66               		.stabs	"int16_t:t(5,3)=(0,1)",128,0,123,0
  67               		.stabs	"uint16_t:t(5,4)=(0,4)",128,0,124,0
  68               		.stabs	"int32_t:t(5,5)=(0,3)",128,0,125,0
  69               		.stabs	"uint32_t:t(5,6)=(0,5)",128,0,126,0
  70               		.stabs	"int64_t:t(5,7)=(0,6)",128,0,128,0
  71               		.stabs	"uint64_t:t(5,8)=(0,7)",128,0,129,0
  72               		.stabs	"intptr_t:t(5,9)=(5,3)",128,0,142,0
  73               		.stabs	"uintptr_t:t(5,10)=(5,4)",128,0,147,0
  74               		.stabs	"int_least8_t:t(5,11)=(5,1)",128,0,159,0
  75               		.stabs	"uint_least8_t:t(5,12)=(5,2)",128,0,164,0
  76               		.stabs	"int_least16_t:t(5,13)=(5,3)",128,0,169,0
  77               		.stabs	"uint_least16_t:t(5,14)=(5,4)",128,0,174,0
  78               		.stabs	"int_least32_t:t(5,15)=(5,5)",128,0,179,0
  79               		.stabs	"uint_least32_t:t(5,16)=(5,6)",128,0,184,0
  80               		.stabs	"int_least64_t:t(5,17)=(5,7)",128,0,192,0
  81               		.stabs	"uint_least64_t:t(5,18)=(5,8)",128,0,199,0
  82               		.stabs	"int_fast8_t:t(5,19)=(5,1)",128,0,213,0
  83               		.stabs	"uint_fast8_t:t(5,20)=(5,2)",128,0,218,0
  84               		.stabs	"int_fast16_t:t(5,21)=(5,3)",128,0,223,0
  85               		.stabs	"uint_fast16_t:t(5,22)=(5,4)",128,0,228,0
  86               		.stabs	"int_fast32_t:t(5,23)=(5,5)",128,0,233,0
  87               		.stabs	"uint_fast32_t:t(5,24)=(5,6)",128,0,238,0
  88               		.stabs	"int_fast64_t:t(5,25)=(5,7)",128,0,246,0
  89               		.stabs	"uint_fast64_t:t(5,26)=(5,8)",128,0,253,0
  90               		.stabs	"intmax_t:t(5,27)=(5,7)",128,0,273,0
  91               		.stabs	"uintmax_t:t(5,28)=(5,8)",128,0,278,0
  92               		.stabn	162,0,0,0
  93               		.stabn	162,0,0,0
  94               		.stabs	"int_farptr_t:t(3,1)=(5,5)",128,0,77,0
  95               		.stabs	"uint_farptr_t:t(3,2)=(5,6)",128,0,81,0
  96               		.stabn	162,0,0,0
  97               		.stabs	"/usr/avr/include/avr/io.h",130,0,0,0
  98               		.stabs	"/usr/avr/include/avr/fuse.h",130,0,0,0
  99               		.stabs	"__fuse_t:t(7,1)=(7,2)=s3low:(0,11),0,8;high:(0,11),8,8;extended:(0,11),16,8;;",128,0,244,0
 100               		.stabn	162,0,0,0
 101               		.stabn	162,0,0,0
 102               		.stabs	"/usr/avr/include/avr/pgmspace.h",130,0,0,0
 103               		.stabs	"/usr/lib/gcc/avr/4.8.2/include/stddef.h",130,0,0,0
 104               		.stabs	"size_t:t(9,1)=(0,4)",128,0,212,0
 105               		.stabn	162,0,0,0
 106               		.stabn	162,0,0,0
 107               		.stabn	162,0,0,0
 108               		.stabn	162,0,0,0
 109               		.stabs	"dbg_set:F(0,47)",36,0,9,dbg_set
 110               		.stabs	"val:P(5,2)",64,0,9,24
 111               	.global	dbg_set
 112               		.type	dbg_set, @function
 113               	dbg_set:
 114               		.stabd	46,0,0
GAS LISTING /tmp/ccYSmu5M.s 			page 3


   1:../../lib/dbg.c **** /*
   2:../../lib/dbg.c ****  * Debug LED Driver
   3:../../lib/dbg.c ****  * jwc :: jwcxz.com
   4:../../lib/dbg.c ****  */
   5:../../lib/dbg.c **** 
   6:../../lib/dbg.c **** #include "config.h"
   7:../../lib/dbg.c **** #include "dbg.h"
   8:../../lib/dbg.c **** 
   9:../../lib/dbg.c **** void dbg_set(uint8_t val) {
 115               		.stabn	68,0,9,.LM0-.LFBB1
 116               	.LM0:
 117               	.LFBB1:
 118               	/* prologue: function */
 119               	/* frame size = 0 */
 120               	/* stack size = 0 */
 121               	.L__stack_usage = 0
  10:../../lib/dbg.c ****     uint8_t tmp = val & 0xF;
 122               		.stabn	68,0,10,.LM1-.LFBB1
 123               	.LM1:
 124 0000 8F70      		andi r24,lo8(15)
  11:../../lib/dbg.c ****     DBGLED_PRT |= tmp;
 125               		.stabn	68,0,11,.LM2-.LFBB1
 126               	.LM2:
 127 0002 98B1      		in r25,0x8
 128 0004 982B      		or r25,r24
 129 0006 98B9      		out 0x8,r25
  12:../../lib/dbg.c ****     DBGLED_PRT &= 0xF0 | tmp;
 130               		.stabn	68,0,12,.LM3-.LFBB1
 131               	.LM3:
 132 0008 98B1      		in r25,0x8
 133 000a 806F      		ori r24,lo8(-16)
 134 000c 8923      		and r24,r25
 135 000e 88B9      		out 0x8,r24
 136 0010 0895      		ret
 137               		.size	dbg_set, .-dbg_set
 138               		.stabs	"tmp:r(5,2)",64,0,10,24
 139               		.stabn	192,0,0,.LFBB1-.LFBB1
 140               		.stabn	224,0,0,.Lscope1-.LFBB1
 141               	.Lscope1:
 142               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 143               		.stabd	78,0,0
 144               		.stabs	"dbg_on:F(0,47)",36,0,15,dbg_on
 145               		.stabs	"val:P(5,2)",64,0,15,24
 146               	.global	dbg_on
 147               		.type	dbg_on, @function
 148               	dbg_on:
 149               		.stabd	46,0,0
  13:../../lib/dbg.c **** }
  14:../../lib/dbg.c **** 
  15:../../lib/dbg.c **** void dbg_on(uint8_t val) {
 150               		.stabn	68,0,15,.LM4-.LFBB2
 151               	.LM4:
 152               	.LFBB2:
 153               	/* prologue: function */
 154               	/* frame size = 0 */
 155               	/* stack size = 0 */
 156               	.L__stack_usage = 0
GAS LISTING /tmp/ccYSmu5M.s 			page 4


  16:../../lib/dbg.c ****     _ON(DBGLED_PRT, val);
 157               		.stabn	68,0,16,.LM5-.LFBB2
 158               	.LM5:
 159 0012 98B1      		in r25,0x8
 160 0014 21E0      		ldi r18,lo8(1)
 161 0016 30E0      		ldi r19,0
 162 0018 082E      		mov r0,r24
 163 001a 00C0      		rjmp 2f
 164               		1:
 165 001c 220F      		lsl r18
 166               		2:
 167 001e 0A94      		dec r0
 168 0020 02F4      		brpl 1b
 169 0022 922B      		or r25,r18
 170 0024 98B9      		out 0x8,r25
 171 0026 0895      		ret
 172               		.size	dbg_on, .-dbg_on
 173               	.Lscope2:
 174               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 175               		.stabd	78,0,0
 176               		.stabs	"dbg_off:F(0,47)",36,0,19,dbg_off
 177               		.stabs	"val:P(5,2)",64,0,19,24
 178               	.global	dbg_off
 179               		.type	dbg_off, @function
 180               	dbg_off:
 181               		.stabd	46,0,0
  17:../../lib/dbg.c **** }
  18:../../lib/dbg.c **** 
  19:../../lib/dbg.c **** void dbg_off(uint8_t val) {
 182               		.stabn	68,0,19,.LM6-.LFBB3
 183               	.LM6:
 184               	.LFBB3:
 185               	/* prologue: function */
 186               	/* frame size = 0 */
 187               	/* stack size = 0 */
 188               	.L__stack_usage = 0
  20:../../lib/dbg.c ****     _OFF(DBGLED_PRT, val);
 189               		.stabn	68,0,20,.LM7-.LFBB3
 190               	.LM7:
 191 0028 98B1      		in r25,0x8
 192 002a 21E0      		ldi r18,lo8(1)
 193 002c 30E0      		ldi r19,0
 194 002e 082E      		mov r0,r24
 195 0030 00C0      		rjmp 2f
 196               		1:
 197 0032 220F      		lsl r18
 198               		2:
 199 0034 0A94      		dec r0
 200 0036 02F4      		brpl 1b
 201 0038 2095      		com r18
 202 003a 2923      		and r18,r25
 203 003c 28B9      		out 0x8,r18
 204 003e 0895      		ret
 205               		.size	dbg_off, .-dbg_off
 206               	.Lscope3:
 207               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 208               		.stabd	78,0,0
GAS LISTING /tmp/ccYSmu5M.s 			page 5


 209               		.stabs	"dbg_init:F(0,47)",36,0,23,dbg_init
 210               	.global	dbg_init
 211               		.type	dbg_init, @function
 212               	dbg_init:
 213               		.stabd	46,0,0
  21:../../lib/dbg.c **** }
  22:../../lib/dbg.c **** 
  23:../../lib/dbg.c **** void dbg_init(void) {
 214               		.stabn	68,0,23,.LM8-.LFBB4
 215               	.LM8:
 216               	.LFBB4:
 217               	/* prologue: function */
 218               	/* frame size = 0 */
 219               	/* stack size = 0 */
 220               	.L__stack_usage = 0
  24:../../lib/dbg.c ****     // this requires the debug bank to be the bottom 4 bits of a bank
  25:../../lib/dbg.c ****     // TODO: make it more advanced
  26:../../lib/dbg.c ****     DBGLED_DDR |= 0x0F;
 221               		.stabn	68,0,26,.LM9-.LFBB4
 222               	.LM9:
 223 0040 87B1      		in r24,0x7
 224 0042 8F60      		ori r24,lo8(15)
 225 0044 87B9      		out 0x7,r24
  27:../../lib/dbg.c ****     DBGLED_PRT &= 0xF0; // clear leds
 226               		.stabn	68,0,27,.LM10-.LFBB4
 227               	.LM10:
 228 0046 88B1      		in r24,0x8
 229 0048 807F      		andi r24,lo8(-16)
 230 004a 88B9      		out 0x8,r24
 231 004c 0895      		ret
 232               		.size	dbg_init, .-dbg_init
 233               	.Lscope4:
 234               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 235               		.stabd	78,0,0
 236               		.stabs	"",100,0,0,.Letext0
 237               	.Letext0:
 238               		.ident	"GCC: (GNU) 4.8.2"
GAS LISTING /tmp/ccYSmu5M.s 			page 6


DEFINED SYMBOLS
                            *ABS*:0000000000000000 dbg.c
     /tmp/ccYSmu5M.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccYSmu5M.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccYSmu5M.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccYSmu5M.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccYSmu5M.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccYSmu5M.s:113    .text:0000000000000000 dbg_set
     /tmp/ccYSmu5M.s:148    .text:0000000000000012 dbg_on
     /tmp/ccYSmu5M.s:180    .text:0000000000000028 dbg_off
     /tmp/ccYSmu5M.s:212    .text:0000000000000040 dbg_init

NO UNDEFINED SYMBOLS
